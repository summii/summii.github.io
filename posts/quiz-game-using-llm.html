<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a Quiz App with Python and Ollama Mistral</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
        }
        pre {
            background: #f4f4f9;
            border-left: 4px solid #333;
            color: #444;
            padding: 10px;
            overflow-x: auto;
        }
        code {
            font-family: monospace;
            color: #c7254e;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        ul {
            margin: 10px 0;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Building a Quiz App with Python and Ollama Mistral</h1>
        <p>
            In this blog, I’ll guide you through building a quiz application designed to help children study through engaging trivia. 
            The app will use <strong>Ollama Mistral</strong> as the language model to generate quiz questions. 
            This project is self-funded and aims to make learning both fun and intuitive for children.
        </p>

        <h2>Case Study</h2>
        <p>
            My nephew enjoys quiz games and often asks me to play with him. He wants questions in categories such as general knowledge or current affairs 
            (history, geography, arts, sports), but manually preparing questions and verifying answers online is tedious.
        </p>
        <p>
            To simplify this, I decided to create a quiz application that he can use independently. Here are the key goals for this app:
        </p>
        <ul>
            <li>The app should be <strong>extremely easy to use</strong>.</li>
            <li>The responses should be <strong>self-explanatory</strong> for children to navigate.</li>
        </ul>

        <h2>Tech Stack</h2>
        <p>
            For this project, I’ll primarily use:
        </p>
        <ul>
            <li>Python</li>
            <li>Ollama Mistral for language model integration</li>
            <li>Rich Library for terminal-based UI testing</li>
            <li>Pydantic for data validation</li>
        </ul>
        <p>In the second phase, I plan to build the UI using <code>Flask</code> or <code>FastHTML</code>.</p>

        <h2>Step 1: Generating Quiz Questions</h2>
        <p>
            To generate trivia questions, we will prompt the language model for a specific category. The questions will relate to <strong>India</strong> to make the context relevant and engaging. 
            Below is the function for generating questions:
        </p>
        <pre><code>def generate_question(self, category):
    """Generate a question for the given category using Ollama"""
    prompt = f"""Generate a {category} trivia question related to India. 
    Respond with only the question on one line, followed by the answer on the next line.
    Make it challenging and interesting."""
    
    print(prompt)
    try:
        response = requests.post('http://localhost:11434/api/generate',
                                 json={
                                     "model": "mistral",
                                     "prompt": prompt,
                                     "stream": False
                                 })
        response.raise_for_status()
        result = response.json()
        
        # Split the response into question and answer
        lines = result['response'].strip().split('\n')
        if len(lines) >= 2:
            question = lines[0].strip()
            answer = lines[1].strip().lower().replace('answer:', '').strip()
            return {"question": question, "answer": answer}
    except Exception as e:
        print(f"Error generating question: {e}")
        return None</code></pre>

        <h2>Step 2: Checking Answers</h2>
        <p>
            To ensure children can get immediate feedback on their answers, I implemented a robust answer-matching logic using Python's 
            <code>SequenceMatcher</code>. This approach handles variations in spelling and phrasing.
        </p>
        <pre><code>def check_answer(self, user_answer, correct_answer):
    """Check the user's answer against the correct answer using robust matching"""
    player_answer = user_answer.lower().strip()
    correct_answer = correct_answer.lower().strip()

    # Direct match
    if player_answer == correct_answer:
        return True

    # Check similarity
    similarity = SequenceMatcher(None, player_answer, correct_answer).ratio()
    if similarity >= 0.8:
        return True

    # Check if the answer is a more specific version
    player_words = player_answer.split()
    correct_words = correct_answer.split()
    important_words = {word for word in correct_words if len(word) > 3}
    
    return important_words.issubset(player_words)</code></pre>

        <h2>Testing the Application</h2>
        <p>
            For terminal-based testing, I will use Python's <strong>Rich</strong> library. It helps create a visually appealing CLI for the quiz app.
        </p>
        <p>In the next blog, I will demonstrate how to build a simple UI using Flask/FastHTML.</p>

        <h2>Conclusion</h2>
        <p>
            By combining the power of Python and Ollama Mistral, this quiz app can turn study time into an enjoyable and interactive experience for children. 
            Stay tuned for the next part where we’ll add a user-friendly interface!
        </p>
    </div>
</body>
</html>
